# NegraRosa Environment Variables Template
# Copy this file to .env for local development
# NEVER commit real secrets to the repository

# ============================================
# Core Application Settings
# ============================================
NODE_ENV=development
PORT=5000
PERSISTENCE=false  # Set to false for development to use ephemeral data

# ============================================
# Database Configuration
# ============================================
# PostgreSQL connection string (local or remote)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/negrarosa_dev

# ============================================
# Authentication & Session Management
# ============================================
# Session secret for Express sessions
# IMPORTANT: Generate a secure random value with: openssl rand -base64 32
# DO NOT use this placeholder in any environment!
SESSION_SECRET=REPLACE_WITH_GENERATED_SECRET_openssl_rand_base64_32

# Paseto signing keys (Ed25519)
# Generate with: npm run generate-keys
PASETO_PRIVATE_KEY=your-paseto-private-key-here
PASETO_PUBLIC_KEY=your-paseto-public-key-here

# Session token TTL (in seconds, default: 900 = 15 minutes)
SESSION_TOKEN_TTL=900

# ============================================
# API Keys (Third-party Services)
# ============================================
# Xano API
XANO_API_BASE_URL=https://your-workspace.xano.io/api
XANO_API_KEY=your-xano-api-key-here

# Notion API
NOTION_API_KEY=your-notion-api-key-here
NOTION_DATABASE_ID=your-notion-database-id-here

# Anthropic Claude API
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# OpenAI API
OPENAI_API_KEY=your-openai-api-key-here

# SendGrid (Email)
SENDGRID_API_KEY=your-sendgrid-api-key-here

# Stripe (Payments)
STRIPE_SECRET_KEY=sk_test_your-stripe-test-key-here
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-test-publishable-key-here
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret-here

# Plaid (Financial Verification)
PLAID_CLIENT_ID=your-plaid-client-id-here
PLAID_SECRET=your-plaid-secret-here
PLAID_ENV=sandbox  # sandbox, development, or production

# ============================================
# Auth0 Configuration (if using Auth0)
# ============================================
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_CLIENT_ID=your-auth0-client-id-here
AUTH0_CLIENT_SECRET=your-auth0-client-secret-here
AUTH0_CALLBACK_URL=http://localhost:5000/auth/callback

# ============================================
# Webhook Configuration
# ============================================
# HMAC secret for webhook signature verification (generate with: openssl rand -hex 32)
WEBHOOK_HMAC_SECRET=your-webhook-hmac-secret-here

# Webhook token TTL (in seconds, default: 300 = 5 minutes)
WEBHOOK_TOKEN_TTL=300

# ============================================
# Redis Configuration (for caching and nonce storage)
# ============================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password-if-needed

# ============================================
# Security Settings
# ============================================
# Rate limiting
RATE_LIMIT_WINDOW_MS=60000  # 1 minute in milliseconds
RATE_LIMIT_MAX_REQUESTS=100  # Max requests per window per IP

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:5000,http://localhost:3000

# Emergency lockdown (set to true to disable all agent actions)
EMERGENCY_LOCKDOWN=false

# ============================================
# Feature Flags
# ============================================
ENABLE_NEW_VERIFICATION=false
ENABLE_AI_ATTESTATION=false
ENABLE_PREVIEW_CLEANUP=true

# ============================================
# Observability & Monitoring
# ============================================
# Prometheus metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# Sentry (Error Tracking)
SENTRY_DSN=your-sentry-dsn-here

# ============================================
# Cloud Provider Settings
# ============================================
# AWS KMS (for secret management)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_KMS_KEY_ID=your-kms-key-id

# ============================================
# Development Tools
# ============================================
# Vercel preview deployments
VERCEL_URL=your-preview-url.vercel.app

# GitHub App (for agent automation)
GITHUB_APP_ID=your-github-app-id
GITHUB_APP_PRIVATE_KEY=your-github-app-private-key

# ============================================
# Notes
# ============================================
# 1. All secrets should be stored in KMS/HSM in production
# 2. Use environment-specific config files (.env.development, .env.staging, .env.production)
# 3. Never commit .env files to the repository
# 4. Rotate secrets regularly (monthly for signing keys, quarterly for API keys)
# 5. For production deployment on Vercel, set all variables in Vercel dashboard
# 6. Contact security@mbtq.dev for questions about secrets management
