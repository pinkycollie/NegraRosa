# MBTQ Ecosystem - WebSocket Configuration
# Common WebSocket settings for real-time services
#
# Usage: include /etc/nginx/snippets/mbtq-websocket.conf;
#
# Installation:
#   sudo cp mbtq-websocket.conf /etc/nginx/snippets/

# WebSocket upgrade
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection "upgrade";

# Longer timeout for persistent connections (24 hours)
proxy_read_timeout 86400s;
proxy_send_timeout 86400s;

# Disable buffering for real-time
proxy_buffering off;

# Visual Protocol markers
proxy_set_header X-WebSocket "true";
proxy_set_header X-Visual-Protocol "enabled";
